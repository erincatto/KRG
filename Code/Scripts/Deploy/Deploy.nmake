##########################################
# KRG DEPLOYMENT SCRIPT
##########################################

EXTERNAL_DIR = $(SLN_DIR)External

##########################################

prebuild:
    nmake -f $(EXTERNAL_DIR)\PhysX\PhysX.nmake WORKING_DIR=$(EXTERNAL_DIR)\PhysX\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    nmake -f $(EXTERNAL_DIR)\Optick\Optick.nmake WORKING_DIR=$(EXTERNAL_DIR)\Optick\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    nmake -f $(EXTERNAL_DIR)\SQLite\SQLite.nmake WORKING_DIR=$(EXTERNAL_DIR)\SQLite\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    nmake -f $(EXTERNAL_DIR)\GameNetworkingSockets\GameNetworkingSockets.nmake WORKING_DIR=$(EXTERNAL_DIR)\GameNetworkingSockets\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    nmake -f $(EXTERNAL_DIR)\Freetype\Freetype.nmake WORKING_DIR=$(EXTERNAL_DIR)\Freetype\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    xcopy /y /d /f "KRG.ini" "$(OUT_DIR)*"

##########################################

clean:
    nmake clean -f $(EXTERNAL_DIR)\PhysX\PhysX.nmake WORKING_DIR=$(EXTERNAL_DIR)\PhysX\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    nmake clean -f $(EXTERNAL_DIR)\Optick\Optick.nmake WORKING_DIR=$(EXTERNAL_DIR)\Optick\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    nmake clean -f $(EXTERNAL_DIR)\SQLite\SQLite.nmake WORKING_DIR=$(EXTERNAL_DIR)\SQLite\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    nmake clean -f $(EXTERNAL_DIR)\GameNetworkingSockets\GameNetworkingSockets.nmake WORKING_DIR=$(EXTERNAL_DIR)\GameNetworkingSockets\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    nmake clean -f $(EXTERNAL_DIR)\Freetype\Freetype.nmake WORKING_DIR=$(EXTERNAL_DIR)\Freetype\ PLATFORM=$(PLATFORM) CONFIG=$(CONFIG) OUT_DIR=$(OUT_DIR)
    del /F /Q "$(OUT_DIR)KRG.ini"