#include "System/TypeSystem/TypeRegistry.h"
#include "Applications/Shared/ApplicationGlobalState.h"
#include "Applications/Shared/_AutoGenerated/EngineTypeRegistration.h"
#include "_AutoGenerated/ToolsTypeRegistration.h"
#include "Engine/Physics/PhysicsLayers.h"
#include "System/Core/FileSystem/FileSystem.h"
#include "Tools/Core/TypeSystem/Serialization/TypeInstanceModelReader.h"
#include "Tools/Core/TypeSystem/TypeInstanceModel.h"

//-------------------------------------------------------------------------

using namespace KRG;
using namespace KRG::Physics;

//-------------------------------------------------------------------------

int main( int argc, char *argv[] )
{
    {
        KRG::ApplicationGlobalState State;
        TypeSystem::TypeRegistry typeRegistry;
        AutoGenerated::Tools::RegisterTypes( typeRegistry );

        //-------------------------------------------------------------------------

        FileSystem::Path path( "D:\\Kruger\\Data\\Packs\\BR\\Characters\\SK_Chr_70sFemale_01.smsh" );

        TypeSystem::TypeInstanceModel typeInstance;
        TypeSystem::TypeInstanceModelReader typeReader( typeRegistry );
        if ( typeReader.ReadFromFile( path ) )
        {
            typeReader.DeserializeType( typeInstance );
        }
       
        //-------------------------------------------------------------------------

        AutoGenerated::Tools::UnregisterTypes( typeRegistry );
    }

    return 0;
}
